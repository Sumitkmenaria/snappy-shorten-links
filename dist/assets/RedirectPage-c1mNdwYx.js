import{c as y,o as w,m as v,r as t,j as e,s as u}from"./index-6xa47Mhh.js";import{C as i,d as c,B as f}from"./card-udcm7_Nx.js";import{E as k}from"./external-link-BtZOomGx.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=y("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),A=()=>{const{slug:a}=w(),h=v(),[g,j]=t.useState(10),[l,p]=t.useState(""),[N,s]=t.useState(!0),[o,n]=t.useState("");t.useEffect(()=>{(async()=>{if(!a){n("Invalid link"),s(!1);return}try{const{data:r,error:d}=await u.from("links").select("original_url, click_count").eq("slug",a).maybeSingle();if(d){console.error("Database error:",d),n("Database error occurred"),s(!1);return}if(!r){n("Link not found"),s(!1);return}p(r.original_url),await u.from("links").update({click_count:r.click_count+1}).eq("slug",a),s(!1);const m=setInterval(()=>{j(x=>x<=1?(clearInterval(m),window.location.href=r.original_url,0):x-1)},1e3);return()=>clearInterval(m)}catch(r){console.error("Error fetching link:",r),n("Something went wrong"),s(!1)}})()},[a]);const b=()=>{l&&(window.location.href=l)};return N?e.jsx("div",{className:"min-h-screen bg-gradient-hero flex items-center justify-center p-4",children:e.jsx(i,{className:"w-full max-w-md",children:e.jsxs(c,{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading your destination..."})]})})}):o?e.jsx("div",{className:"min-h-screen bg-gradient-hero flex items-center justify-center p-4",children:e.jsx(i,{className:"w-full max-w-md",children:e.jsxs(c,{className:"p-8 text-center space-y-4",children:[e.jsx("div",{className:"text-6xl",children:"ðŸ˜¿"}),e.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"Oops!"}),e.jsx("p",{className:"text-muted-foreground",children:o}),e.jsx(f,{onClick:()=>h("/"),className:"w-full",children:"Go Home"})]})})}):e.jsx("div",{className:"min-h-screen bg-gradient-hero flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-2xl space-y-6",children:[e.jsx("div",{className:"h-32 bg-gray-200 rounded-lg flex items-center justify-center",children:e.jsx("p",{className:"text-gray-500",children:"Advertisement"})}),e.jsx(i,{className:"bg-gradient-card shadow-soft border-primary/20",children:e.jsxs(c,{className:"p-8 text-center space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸš€"}),e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"You're being redirected"}),e.jsxs("p",{className:"text-muted-foreground",children:["Redirecting in ",e.jsx("span",{className:"font-bold text-primary",children:g})," seconds..."]})]}),e.jsxs("div",{className:"bg-background/50 rounded-lg p-4 border",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground mb-2",children:[e.jsx(k,{className:"w-4 h-4"}),"Destination:"]}),e.jsx("div",{className:"font-mono text-sm break-all text-foreground",children:l})]}),e.jsxs("div",{className:"bg-yellow-100 border-l-4 border-yellow-500 text-yellow-700 p-4",role:"alert",children:[e.jsxs("p",{className:"font-bold flex items-center",children:[e.jsx(L,{className:"mr-2"}),"Warning"]}),e.jsx("p",{children:"This is an external website. Only proceed if you trust the sender."})]}),e.jsx(f,{onClick:b,className:"w-full flex items-center gap-2",children:"Go to URL now"})]})}),e.jsx("div",{className:"h-32 bg-gray-200 rounded-lg flex items-center justify-center",children:e.jsx("p",{className:"text-gray-500",children:"Advertisement"})})]})})};export{A as default};
